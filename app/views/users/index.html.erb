
<%= link_to("Dashboard",{:controller=>'admin',:action=>'index'},:class=>'action admin index')%> | 
<h1>Customers</h1>
<%= form_tag({:action=>'filtered'}) do %>
<table class="search" summary="">

	<tr>
		<td>
			<%= label_tag("Search By")%> <%= text_field_tag("search",params[:search].blank? ? "" : params[:search], :placeholder=>"Name or Membership No")%>
		</td>
	</tr>

</table>	<% end %>
<table class="listing" summary="Customer list">
  <tr class="header">
    <th>&nbsp;</th>
    <th>Name</th>
    <th>Membership No.</th>
    <th>Email </th>
    <th>Phone No.</th>
    <th>Actions</th>
  </tr>
  <% @users.each_with_index do |data,i| %>
  <tr class="">
    <td class="position"><%= i+1 %></td>
    <td><%= data.name %></td>
    <td><%= data.membership %></td>
    <td><%= data.email %></td>
  	<td><%= data.phone %></td>
    <td class="actions">
      	<% if current_user.role_id == 1 %>
     		<%= form_tag({:action=>'update' , :membership => data.membership},:method => "patch" ,:remote => true, :class => "ajax-form") do %>
     			<%= hidden_field_tag("role_id",1)%>
     			<%= submit_tag("Admin",:class => "ajax-button",:disabled => data.role_id == 1 ? true : false)%>
     		<% end %>
     		<%= form_tag({:action=>'update' , :membership => data.membership},:method => "patch" ,:remote => true, :class => "ajax-form") do %>
     			<%= hidden_field_tag("role_id",2)%>
     			<%= submit_tag("Restaurant Owner",:class => "ajax-button", :disabled => data.role_id == 2 ? true : false)%>
     		<% end %>
     		<%= form_tag({:action=>'update' , :membership => data.membership},:method => "patch" ,:remote => true, :class => "ajax-form") do %>
     			<%= hidden_field_tag("role_id",3)%>
     			<%= submit_tag("Customer",:class => "ajax-button",:disabled => data.role_id == 3 ? true : false)%>
     		<% end %>
     	<% end %>
    </td>
  </tr>
  <% end %>
</table>
